<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="layuiadmin/layui/css/layui.css" media="all">
  <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>

<body style="background:#FFF">

  <!--<form method="post" action="$cls.getrooturl()?type=add&id=$!id&mid=${jb}!mid&tabid=${tabid}&job=${job}&tbname=${tbname}" class="pageForm required-validate" onsubmit="return validateCallback(this, $isAjaxDone);">-->
  <!--navTabAjaxDone,dialogAjaxDone  -->
  <form class="layui-form" action="">
    <blockquote class="layui-elem-quote layui-text">
      信息详情
    </blockquote>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
      <legend>信息详情</legend>
    </fieldset>
    <!--<input id="hpflownods" name="hpflownods" type="hidden" value="" />-->
    <input name="isadd" type="hidden" value="$!isadd" />
    <!--是否第一次添加 0第一次 1不是第一次-->


    <input name="add" type="hidden" value="users_name" />
    <div class="layui-form-item">
      <label class="layui-form-label">用户名称</label>
      <div class="layui-input-block">
        <input type="text" name="users_name" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入用户名称"
          class="layui-input" value="$!users_name">
      </div>
    </div>




    <input name="add" type="hidden" value="iphone" />
    <div class="layui-form-item">
      <label class="layui-form-label">手机号</label>
      <div class="layui-input-block">
        <input type="text" name="iphone" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入手机号"
          class="layui-input" value="$!iphone">
      </div>
    </div>




    <input name="add" type="hidden" value="users_status" />
    <div class="layui-form-item">
      <label class="layui-form-label">用户状态</label>
      <div class="layui-input-block">
        <input type="text" name="users_status" lay-verify="required|phone|number" autocomplete="off"
          placeholder="请输入用户状态" class="layui-input" value="$!users_status">
      </div>
    </div>




    <input name="add" type="hidden" value="headportrait" />
    <div class="layui-form-item">
      <label class="layui-form-label">头像</label>
      <div class="layui-input-block">
        <input type="text" name="headportrait" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入头像"
          class="layui-input" value="$!headportrait">
      </div>
    </div>




    <input name="add" type="hidden" value="user_id" />
    <div class="layui-form-item">
      <label class="layui-form-label">用户id</label>
      <div class="layui-input-block">
        <input type="text" name="user_id" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入用户id"
          class="layui-input" value="$!user_id">
      </div>
    </div>




    <input name="add" type="hidden" value="email" />
    <div class="layui-form-item">
      <label class="layui-form-label">邮箱</label>
      <div class="layui-input-block">
        <input type="text" name="email" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入邮箱"
          class="layui-input" value="$!email">
      </div>
    </div>




    <input name="add" type="hidden" value="department_name" />
    <div class="layui-form-item">
      <label class="layui-form-label">所属部门</label>
      <div class="layui-input-block">
        <input type="text" name="department_name" lay-verify="required|phone|number" autocomplete="off"
          placeholder="请输入所属部门" class="layui-input" value="$!department_name">
      </div>
    </div>




    <input name="add" type="hidden" value="department_id" />
    <div class="layui-form-item">
      <label class="layui-form-label">所属部门id</label>
      <div class="layui-input-block">
        <input type="text" name="department_id" lay-verify="required|phone|number" autocomplete="off"
          placeholder="请输入所属部门id" class="layui-input" value="$!department_id">
      </div>
    </div>




    <input name="add" type="hidden" value="perms" />
    <div class="layui-form-item">
      <label class="layui-form-label">权限</label>
      <div class="layui-input-block">
        <input type="text" name="perms" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入权限"
          class="layui-input" value="$!perms">
      </div>
    </div>




    <input name="add" type="hidden" value="postjob" />
    <div class="layui-form-item">
      <label class="layui-form-label">岗位</label>
      <div class="layui-input-block">
        <input type="text" name="postjob" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入岗位"
          class="layui-input" value="$!postjob">
      </div>
    </div>




    <input name="add" type="hidden" value="filepath" />
    <div class="layui-form-item">
      <label class="layui-form-label">文件路径</label>
      <div class="layui-input-block">
        <input type="text" name="filepath" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入文件路径"
          class="layui-input" value="$!filepath">
      </div>
    </div>




    <input name="add" type="hidden" value="password" />
    <div class="layui-form-item">
      <label class="layui-form-label">密码</label>
      <div class="layui-input-block">
        <input type="text" name="password" lay-verify="required|phone|number" autocomplete="off" placeholder="请输入密码"
          class="layui-input" value="$!password">
      </div>
    </div>


    <div class="layui-form-item">
      <button type="submit" class="layui-btn" lay-submit="" lay-filter="layajax_add">立即提交</button>
    </div>
  </form>

  <script src="layuiadmin/layui/layui.js"></script>
  <script>
    layui.use(['form', 'layedit', 'laydate'], function () {
      var form = layui.form
        , $ = layui.jquery
        , layer = layui.layer
        , layedit = layui.layedit
        , laydate = layui.laydate;

      //日期
      laydate.render({
        elem: '.date_lay'
      });


      //创建一个编辑器
      var editIndex = layedit.build('LAY_demo_editor');

      //自定义验证规则
      form.verify({
        title: function (value) {
          if (value.length < 5) {
            return '标题至少得5个字符啊';
          }
        }
        , pass: [
          /^[\S]{6,12}$/
          , '密码必须6到12位，且不能出现空格'
        ]
        , content: function (value) {
          layedit.sync(editIndex);
        }
      });

      //监听指定开关
      form.on('switch(switchTest)', function (data) {
        layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {
          offset: '6px'
        });
        layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
      });

      //监听提交
      form.on('submit(layajax_add)', function (data) {
        $.ajax({
          url: '$cls.getrooturl()?type=add&id=$!{id}&mid=$!{mid}&tabid=$!{tabid}&job=${job}&tbname=${tbname}',
          type: 'post',
          dataType: 'json',
          //contentType: 'application/json',
          data: $("form").serialize(),
          //timeout:2000,
          // beforeSend:function (xhr) {xhr.setRequestHeader(header,token); },
          success: function (data) {
            console.log(data);
            if (data.statusCode == '200') {
              layer.msg(data.message, { icon: 6 }, function () {
                //layer.msg('捕获就是从页面已经存在的元素上，包裹layer的结构', {time: 5000, icon:6});
                //admin.events.refresh();
                layer.closeAll();
              });
            } else {
              layer.msg(data.message, { icon: 5, anim: 6 });
            }
          },
          error: function () {
            layer.msg("操作失败", { icon: 5, anim: 6 });
          }
        })

        return false;
      });

    });
  </script>
</body>

</html>