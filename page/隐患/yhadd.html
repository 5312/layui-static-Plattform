<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>复杂表单</title>
  <link rel="stylesheet" href="../../layuiAdmin/layui/css/layui.css" />
  <link rel="stylesheet" href="../../layuiAdmin/style/admin.css" />
  <link rel="stylesheet" href="../../layuiAdmin/style/admin1.css" />
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <style>
    #formAdvForm .layui-form-item {
      margin-top: 20px;
      margin-bottom: 0;
    }

    #formAdvForm .layui-form-item .layui-inline {
      margin-bottom: 25px;
      margin-right: 0;
    }

    .form-group-bottom {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 10px 20px;
      background-color: #fff;
      box-shadow: 0 -1px 2px 0 rgba(0, 0, 0, .05);
    }

    .layui-form-label {
      white-space: nowrap;
    }
  </style>
</head>

<body>

  <!-- 正文开始 -->
  <form class="layui-form" id="formAdvForm" lay-filter="formAdvForm">
    <div class="layui-fluid" style="padding-bottom: 75px;">
      <div class="layui-card">
        <div class="layui-card-header">责任部门</div>
        <div class="layui-card-body">
          <table id="formAdvTable" lay-filter="formAdvTable"></table>
        </div>
      </div>
      <div class="layui-card">
        <div class="layui-card-header">基础信息</div>
        <div class="layui-card-body">

          <div class="layui-form-item layui-row">
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">检查类别:</label>
              <div class="layui-input-block">
                <input name="ckName" placeholder="请输入仓库名称" class="layui-input" lay-verType="tips" lay-verify="required"
                  required />
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">检查地点:</label>
              <div class="layui-input-block">
                <input name="ckYm" placeholder="请输入" class="layui-input" lay-verType="tips" lay-verify="required"
                  required />
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">详细地点:</label>
              <div class="layui-input-block">
                <input name="ckYm" placeholder="请输入" class="layui-input" lay-verType="tips" lay-verify="required"
                  required />
              </div>
            </div>

            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">检查人:</label>
              <div class="layui-input-block">
                <select name="spPerson" lay-verType="tips" lay-search="" lay-verify="required" required>
                  <option value="">请选择审批人</option>
                  <option value="0">付晓晓</option>
                  <option value="1">周毛毛</option>
                </select>
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">陪检人:</label>
              <div class="layui-input-block">
                <select name="spPerson" lay-verType="tips" lay-search="" lay-verify="required" required>
                  <option value="">请选择审批人</option>
                  <option value="0">付晓晓</option>
                  <option value="1">周毛毛</option>
                </select>
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">检查日期:</label>
              <div class="layui-input-block">
                <input id="formAdvDateSel1" name="sxTime" placeholder="请选择开始和结束日期" class="layui-input icon-date"
                  autocomplete="off" lay-verType="tips" lay-verify="required" required />
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm4">
              <label class="layui-form-label layui-form-required">仓库类型:</label>
              <div class="layui-input-block">
                <select name="ckType" lay-verType="tips" lay-verify="required" required>
                  <option value="">请选择仓库类型</option>
                  <option value="0">私密</option>
                  <option value="1">公开</option>
                </select>
              </div>
            </div>
            <div class="layui-inline layui-col-md4 layui-col-sm8">
              <label class="layui-form-label">班次:</label>
              <div class="layui-input-block">
                <input type="radio" name="gk" value="0" title="早班" checked>
                <input type="radio" name="gk" value="1" title="中班">
                <input type="radio" name="gk" value="2" title="夜班">
                <!-- <div class="layui-word-aux">客户、邀评人默认被分享</div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="layui-card">
        <div class="layui-card-header">详细信息</div>
        <div class="layui-card-body">

          <div class="layui-form-item layui-row">
            <div class="layui-inline layui-col-md1 layui-col-sm2">
              <label class="layui-form-label">带班领导:</label>
              <div class="layui-input-block">
                <input type="radio" name="da" value="0" title="">
                <!-- <div class="layui-word-aux">客户、邀评人默认被分享</div> -->
              </div>
            </div>
            <div class="layui-inline layui-col-md11 layui-col-sm10">
              <label class="layui-form-label">行走线路</label>
              <div class="layui-input-block">
                <input type="text" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md12 layui-col-sm12">
              <label for="" class="layui-form-label">隐患内容</label>
              <div class="layui-input-block">
                <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
              </div>
            </div>
            <div class="layui-inline layui-col-md12 layui-col-sm12">
              <label for="" class="layui-form-label">整改要求</label>
              <div class="layui-input-block">
                <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
              </div>
            </div>
            <div class="layui-inline layui-col-md7 layui-col-sm8">
              <label class="layui-form-label layui-form-required">隐患等级:</label>
              <div class="layui-input-block">
                <input type="radio" name="gk" value="0" title="重大隐患" checked>
                <input type="radio" name="gk" value="1" title="较大隐患">
                <input type="radio" name="gk" value="2" title="一般隐患">
                <input type="radio" name="gk" value="2" title="严重不安全行为">
                <input type="radio" name="gk" value="2" title="不规范行为">
                <input type="radio" name="gk" value="2" title="一般不安全行为">
                <!-- <div class="layui-word-aux">客户、邀评人默认被分享</div> -->
              </div>
            </div>
            <div class="layui-inline layui-col-md5 layui-col-sm4">
              <label class=" layui-form-label layui-form-required">隐患种类:</label>
              <div class="layui-input-block">
                <select name="rwType" lay-verType="tips" lay-verify="required" required>
                  <option value="">请选择任务类型</option>
                  <option value="0">私密</option>
                  <option value="1">公开</option>
                </select>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="layui-card">
        <div class="layui-card-header">补充信息</div>
        <div class="layui-card-body">

          <div class="layui-form-item layui-row">
            <div class="layui-inline layui-col-md12 layui-col-sm12">
              <label for="" class="layui-form-label">标准条款</label>
              <div class="layui-input-block">
                <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
              </div>
            </div>
            <div class="layui-inline layui-col-md6 layui-col-sm6">
              <label for="" class="layui-form-label">单位罚款</label>
              <div class="layui-input-block">
                <input type="text" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md6 layui-col-sm6">
              <label for="" class="layui-form-label">个人罚款</label>
              <div class="layui-input-block">
                <input type="text" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md6 layui-col-sm6">
              <label for="" class="layui-form-label">单位罚款范围</label>
              <div class="layui-input-block">
                <input type="text" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md6 layui-col-sm6">
              <label for="" class="layui-form-label">个人罚款范围</label>
              <div class="layui-input-block">
                <input type="text" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md12 layui-col-sm12">
              <label for="" class="layui-form-label">上传图片</label>
              <div class="layui-input-block">
                <div class="layui-upload-drag" id="test10">
                  <i class="layui-icon"></i>
                  <p>点击上传，或将文件拖拽到此处</p>
                  <div class="layui-hide" id="uploadDemoView">
                    <hr>
                    <img src="" alt="上传成功后渲染" style="max-width: 196px">
                  </div>
                </div>
              </div>
            </div>
            <div class="layui-inline layui-col-md12 layui-col-sm12">
              <fieldset class="layui-elem-field">
                <legend>上传文件</legend>
                <div class="layui-field-box">
                  <div class="layui-upload">
                    <button type="button" class="layui-btn layui-btn-normal" id="testList">选择多文件</button>
                    <div class="layui-upload-list">
                      <table class="layui-table">
                        <thead>
                          <tr>
                            <th>文件名</th>
                            <th>大小</th>
                            <th>状态</th>
                            <th>操作</th>
                          </tr>
                        </thead>
                        <tbody id="demoList"></tbody>
                      </table>
                    </div>
                    <button type="button" class="layui-btn" id="testListAction">开始上传</button>
                  </div>
                </div>
              </fieldset>
            </div>
            <div class="layui-inline layui-col-md3 layui-col-sm3">
              <label for="" class="layui-form-label">要求完成时间</label>
              <div class="layui-input-block">
                <input type="text" id="date1" class="layui-input">
              </div>
            </div>
            <div class="layui-inline layui-col-md6 layui-col-sm9">
              <label class="layui-form-label layui-form-required">隐患等级:</label>
              <div class="layui-input-block">
                <input type="radio" name="like1[write]" lay-skin="primary" title="当天整改" checked>
                <input type="radio" name="like1[write]" lay-skin="primary" title="一天整改">
                <input type="radio" name="like1[write]" lay-skin="primary" title="二天整改">
                <input type="radio" name="like1[write]" lay-skin="primary" title="三天整改">
                <!-- <div class="layui-word-aux">客户、邀评人默认被分享</div> -->
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>

    <div class="form-group-bottom text-right">
      <button type="reset" class="layui-btn layui-btn-primary">&emsp;重置&emsp;</button>
      <button class="layui-btn" lay-filter="formAdvSubmit" lay-submit>&emsp;提交&emsp;</button>
      <button class="layui-btn" lay-filter="formAdvSubmit" lay-submit>&emsp;保存&emsp;</button>
      <button class="layui-btn" lay-filter="formAdvClose" lay-submit
        onclick="parent.layer.closeAll()">&emsp;关闭&emsp;</button>
    </div>

  </form>

  <!-- js部分 -->
  <script type="text/javascript" src="../../layuiAdmin/layui/layui.all.js"></script>
  <script>
    layui.use(['layer', 'form', 'table', 'laydate'], function () {
      var $ = layui.jquery;
      var layer = layui.layer;
      var form = layui.form;
      var table = layui.table;
      var laydate = layui.laydate;
      laydate.render({
        elem: '#date1'

      });
      /* 渲染表格 */
      table.render({
        elem: '#formAdvTable',
        url: '../../../json/user.json',
        page: true,
        cellMinWidth: 100,
        cols: [[
          { type: 'checkbox' },
          { type: 'numbers' },
          { field: 'username', title: '账号', align: 'center', sort: true },
          { field: 'nickName', title: '用户名', align: 'center', sort: true },
          { field: 'phone', title: '手机号', align: 'center', sort: true },
          { field: 'sex', title: '性别', align: 'center', sort: true },
          { field: 'createTime', title: '创建时间', align: 'center', sort: true }
        ]]
      });

      /* 渲染laydate */
      laydate.render({
        elem: '#formAdvDateSel1',
        range: false,
        trigger: 'click'
      });
      form.on('submit(formAdvClose)', function () {
        layer.close();
        console.log(1)
        return false
      })
      /* 监听表单提交 */
      form.on('submit(formAdvSubmit)', function (data) {
        // 验证表格选择
        var checkRows = table.checkStatus('formAdvTable');
        if (checkRows.data.length === 0) {
          layer.tips('请至少选择一位成员', '#formAdvTable+.layui-table-view .layui-table-header th:eq(0) div', { tips: [1, '#ff4c4c'] });
          return false;
        }
        // 表格选择的数据放到data.field中
        data.field.checkUsers = checkRows.data;
        layer.msg(JSON.stringify(data.field));
        return false;
      });

    });
  </script>
</body>

</html>